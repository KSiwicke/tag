---
title: "tag"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{tag}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

Load the *tag* package:
```{r setup}
library(tag)
library(terra)
# library(lubridate)
# library(tidyterra)
library(dplyr)
library(stars)
```

```{r} 
devtools::load_all() # To delete

bathy <- cod_ex[[1]]
st_dimensions(bathy)$x$delta # resolution in x direction
st_dimensions(bathy)$y$delta # resolution in y direction
h <- st_dimensions(bathy)$x$delta

land <- bathy %>%
  mutate(depth = ifelse(depth < 15, 0, 1)) # 15-m cutoff, but can change as needed
fish_data <- cod_ex[[3]]
L <- cod_ex[[4]]
```

```{r, dev = 'png'}
smooth <- fwd_bck(D = c(10, 75), h = h, L = L, land = t(land$depth), fish_data = fish_data)

sm_ras <- rast(smooth)
plot(sm_ras[[20]])
plot(sm_ras[[40]])
plot(sm_ras[[60]])
plot(sm_ras[[80]])
```
